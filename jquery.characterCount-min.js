(function(e){function t(t,n){this.field=e(t);this.settings=n||{};this.maxLength=this.settings.maxLength||this.field.attr("maxlength")||this.field.data("maxlength");this.maxLength&&this.init()}e.extend(t.prototype,{init:function(){this.message=e(this.settings.countHTML);this.settings.alwaysShow===!1&&this.message.hide();this.message.addClass(this.settings.countClass).insertAfter(this.field);this.field.removeAttr("maxlength").on({"focus input propertychange":e.proxy(this.showCount,this),blur:e.proxy(this.hideCount,this)});this.settings.alwaysShow&&this.showCount()},showCount:function(){var e=this.field.val().length,t=this.maxLength-e;this.message.toggle(e>=this.settings.displayThreshold).toggleClass(this.settings.exceededClass,t<0).html(this.settings.renderCount?this.settings.renderCount(t):t)},hideCount:function(){this.settings.alwaysShow===!1&&this.message.hide()}});e.fn.characterCount=function(n){var r=e.extend({},e.fn.characterCount.defaults,n||{});return this.each(function(){e.data(this,"sodaCharacterCount")||e.data(this,"sodaCharacterCount",new t(this,r))})};e.fn.characterCount.defaults={displayThreshold:0,alwaysShow:!1,countHTML:"<div></div>",countClass:"count",exceededClass:"exceeded"}})(jQuery);